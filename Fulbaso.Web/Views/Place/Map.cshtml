@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Header
{
    <div class="page-header" >
        <h1>
            Mapa de canchas
        </h1>
    </div>
}

@section StyleSheets
{
    <style>
        @@media (max-width: 979px) {
            body { padding-left: 0px !important; padding-right: 0px !important; }
            .navbar { padding-left: 10px; padding-right: 10px; margin-bottom: 0px !important; }
            .page-header { display: none; }
        }
    </style>
}

<div class="container">
    <div class="row">
        <div class="span12">
            <div id="map_canvas" style="height: 500px; width: 100%;"></div>
        </div>
    </div>
</div>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script>
    $(function () {
        f.map.initialize("map_canvas", "-38", "-63");
        f.map.markFrom("@Html.Raw(Url.Action("GetNearestFromLocation", "Place", new { distance = 0, lat = -38, lng = -63 }))", "@Url.Content("~")img/sport_soccer.png");
        map.setZoom(4);
        f.location.initialize("map_canvas", function (position) {
            f.map.mark("¡Estás acá! (en un radio de " + position.coords.accuracy + " metros)", position.coords.latitude, position.coords.longitude, "@Url.Content("~")img/user.png");
            map.setZoom(15);
            map.setCenter(new google.maps.LatLng(position.coords.latitude, position.coords.longitude))
        });
        
        function resize() {
            if ( $(window).width() < 980 ) {
                $("#map_canvas").height(($(window).height()-50)+"px")
            }
            else {
                $("#map_canvas").height(($(window).height()-280)+"px")
            }
        }

        $(window).bind('resize', resize);
        resize();
    });
</script>